{% extends "manage.html" %}
{% block title %}Edit list words{% endblock %}

{% block manage %}
<div class="container">
    <h1 class="mt-4">Editable Table</h1>
    <input type="file" id="upload-excel" class="form-control-file mt-3">
    <button class="btn btn-secondary mt-2" onclick="showColumnMappingModal()">Upload Excel</button><br>
    <input type="file" id="upload-json" class="form-control-file mt-3">
    <button class="btn btn-secondary mt-2" onclick="uploadJson()">Upload JSON</button>
    <div class="form-group">
        <label for="rows-per-page">Rows per page:</label>
        <select id="rows-per-page" class="form-control" onchange="changeRowsPerPage()">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
            <option value="200">200</option>
        </select>
    </div>
    <div class="mb-3">
        <button id="loadAudioPaths" class="btn btn-info mt-2">Load Audio Paths</button>  
        <button id="loadImagePaths" class="btn btn-info mt-2">Load Image Paths</button>  
        <button id="translateRows" class="btn btn-warning mt-2">Translate Rows</button>  
        <button id="search" class="btn btn-primary mt-2">Search</button>
        <button class="btn btn-secondary mt-2" id="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
    </div>
    <table class="table table-bordered mt-4" id="data-table">
        <thead>
            <tr>
                <th>
                    Language
                    <select id="bulkLanguage" class="form-select form-select-sm">
                        <option value="English">English</option>
                        <option value="Spanish">Spanish</option>
                        <option value="French">French</option>
                        <option value="German">German</option>
                        <option value="Italian">Italian</option>
                        <option value="Portuguese">Portuguese</option>
                        <option value="Chinese">Chinese</option>
                        <option value="Japanese">Japanese</option>
                        <option value="Korean">Korean</option>
                        <option value="Russian">Russian</option>
                        <option value="Arabic">Arabic</option>
                        <option value="Hebrew">Hebrew</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Polish">Polish</option>
                        <option value="Dutch">Dutch</option>
                        <option value="Swedish">Swedish</option>
                        <option value="Danish">Danish</option>
                        <option value="Norwegian">Norwegian</option>
                        <option value="Finnish">Finnish</option>
                        <option value="Greek">Greek</option>
                        <option value="Turkish">Turkish</option>
                        <option value="Persian">Persian</option>
                        <option value="Thai">Thai</option>
                        <option value="Vietnamese">Vietnamese</option>
                        <option value="Indonesian">Indonesian</option>
                        <option value="Malay">Malay</option>
                        <option value="Swahili">Swahili</option>
                        <option value="Czech">Czech</option>
                        <option value="Hungarian">Hungarian</option>
                        <option value="Romanian">Romanian</option>
                        <option value="Bulgarian">Bulgarian</option>
                        <option value="Slovak">Slovak</option>
                        <option value="Lithuanian">Lithuanian</option>
                        <option value="Latvian">Latvian</option>
                        <option value="Estonian">Estonian</option>
                        <option value="Icelandic">Icelandic</option>
                        <option value="Faroese">Faroese</option>
                        <option value="Welsh">Welsh</option>
                        <option value="Irish">Irish</option>
                        <option value="Scottish Gaelic">Scottish Gaelic</option>
                        <!-- Add more options as needed -->
                    </select>
                </th>
                <th>
                    Translation Language
                    <select id="bulkTranslationLanguage" class="form-select form-select-sm">
                        <option value="English">English</option>
                        <option value="Spanish">Spanish</option>
                        <option value="French">French</option>
                        <option value="German">German</option>
                        <option value="Italian">Italian</option>
                        <option value="Portuguese">Portuguese</option>
                        <option value="Chinese">Chinese</option>
                        <option value="Japanese">Japanese</option>
                        <option value="Korean">Korean</option>
                        <option value="Russian">Russian</option>
                        <option value="Arabic">Arabic</option>
                        <option value="Hebrew">Hebrew</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Polish">Polish</option>
                        <option value="Dutch">Dutch</option>
                        <option value="Swedish">Swedish</option>
                        <option value="Danish">Danish</option>
                        <option value="Norwegian">Norwegian</option>
                        <option value="Finnish">Finnish</option>
                        <option value="Greek">Greek</option>
                        <option value="Turkish">Turkish</option>
                        <option value="Persian">Persian</option>
                        <option value="Thai">Thai</option>
                        <option value="Vietnamese">Vietnamese</option>
                        <option value="Indonesian">Indonesian</option>
                        <option value="Malay">Malay</option>
                        <option value="Swahili">Swahili</option>
                        <option value="Czech">Czech</option>
                        <option value="Hungarian">Hungarian</option>
                        <option value="Romanian">Romanian</option>
                        <option value="Bulgarian">Bulgarian</option>
                        <option value="Slovak">Slovak</option>
                        <option value="Lithuanian">Lithuanian</option>
                        <option value="Latvian">Latvian</option>
                        <option value="Estonian">Estonian</option>
                        <option value="Icelandic">Icelandic</option>
                        <option value="Faroese">Faroese</option>
                        <option value="Welsh">Welsh</option>
                        <option value="Irish">Irish</option>
                        <option value="Scottish Gaelic">Scottish Gaelic</option>
                        <!-- Add more options as needed -->
                    </select>
                </th>
                <th>Word</th>
                <th>Translation</th>
                <th>Definition</th>
                <th>Example</th>
                <th>Example Translation</th>
                <th>Image Link</th>
                <th>Audio Link</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be populated by JavaScript -->
        </tbody>
        
    </table>
    <div class="d-flex justify-content-between">
        <button class="btn btn-primary" onclick="prevPage()">Previous</button>
        <span>Page <span id="current-page">1</span> of <span id="total-pages"></span></span>
        <input type="number" id="page-number" min="1" class="form-control" style="width: 80px;" onchange="goToPage()">
        <button class="btn btn-primary" onclick="nextPage()">Next</button>
    </div>
    <button class="btn btn-primary mt-2" onclick="addRow()">Add Row</button>
    <button class="btn btn-danger mt-2" onclick="clearTable()">Clear Table</button>
    <button class="btn btn-warning mt-2" onclick="undoChanges()">Undo Changes</button>
    <button id="saveChanges" class="btn btn-success mt-2">Save Changes</button> 

    <!-- Column Mapping Modal -->
    <div class="modal fade" id="columnMappingModal" tabindex="-1" aria-labelledby="columnMappingModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="columnMappingModalLabel">Map Columns</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="column-mapping-form">
                <!-- Form fields will be dynamically added here -->
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary" onclick="submitColumnMapping()">Submit</button>
            </div>
          </div>
        </div>
      </div>      

<!-- Save Changes Modal -->
<div class="modal fade" id="saveChangesModal" tabindex="-1" aria-labelledby="saveChangesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="saveChangesModalLabel">Save Changes</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to save the changes?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="confirmSaveChanges()">Save</button>
        </div>
      </div>
    </div>
  </div>
  
<!-- Translate Rows Modal -->
<div class="modal fade" id="translateRowsModal" tabindex="-1" aria-labelledby="translateRowsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="translateRowsModalLabel">Translate Rows</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="sourceColumn">Source Column:</label>
            <select id="sourceColumn" class="form-control">
              <option value="word">Word</option>
              <option value="definition">Definition</option>
              <option value="example">Example</option>
            </select>
          </div>
          <div class="form-group mt-3">
            <label for="targetColumn">Target Column:</label>
            <select id="targetColumn" class="form-control">
              <option value="translation">Translation</option>
              <option value="example_translation">Example Translation</option>
            </select>
          </div>
          <div class="form-group mt-3">
            <label for="targetLang">Target Language:</label>
            <input type="text" id="targetLang" class="form-control" placeholder="e.g., pl for Polish">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" onclick="confirmTranslateRows()">Translate</button>
        </div>
      </div>
    </div>
  </div>

<!-- Search Modal -->
<div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="searchModalLabel">Search</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="searchInput">Search:</label>
            <input type="text" id="searchInput" class="form-control" placeholder="Enter text to search">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='project/js/manage/exel.js') }}"></script>
{% endblock %}
